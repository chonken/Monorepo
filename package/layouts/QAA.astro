---
interface Props {
  selector: string
  group?: boolean
  firstOpen?: boolean
  activeOnly?: boolean
}
const { selector, group = false, firstOpen = false, activeOnly = false } = Astro.props
---

<script define:vars={{ s: selector, g: group, f: firstOpen, a: activeOnly }}>
  if (g) {
    $(function () {
      $(`${s} dd`).hide()
      if (f) {
        $(`${s} dt:nth-of-type(1)`).addClass('active').next('dd').show()
      }
      $(s).on('click', 'dt', function () {
        if (a) $(this).siblings('.active').removeClass('active').next('dd').slideUp(400)
        $(this).toggleClass('active').next('dd').slideToggle(400)
      })
    })
  } else {
    $(function () {
      $(`${s} dd`).hide()
      if (f) {
        $(`${s} dl:nth-of-type(1)`).addClass('active').find('dd').show()
      }
      $(s).on('click', 'dt', function () {
        if (a) $(this).parent().siblings('.active').removeClass('active').find('dd').slideUp(400)
        $(this).next('dd').slideToggle(400).parent().toggleClass('active')
      })
    })
  }
</script>
