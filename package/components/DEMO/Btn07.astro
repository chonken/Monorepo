---
import type { ButtonProps } from '../../type/button'
import { mergeClasses } from '../../utils'

export interface Btn07Props extends ButtonProps {
  arrow?: boolean
}
interface Props extends Btn07Props {}

const { href = '#', class: className = '', color = 'inherit', backgroundColor = '#eef1f6', blank = false, arrow = false, ...rest } = Astro.props

const styleList = {
  '--clr': color,
  '--bgc': backgroundColor,
}
const classList = mergeClasses(className, ['btn_type07'])
---

<a href={href} class:list={classList} style={styleList} target={blank ? '_blank' : undefined} {...rest}>
  <span class="ch-text"><slot>查看更多</slot></span>
  {
    Astro.slots.has('icon') && (
      <span class="ch-icon">
        {arrow ? (
          <svg viewBox="0 0 13 10" width="1.3em" height="1em" preserveAspectRatio="xMidYMid meet">
            <path d="M12.644,5.802c0.475-0.429,0.475-1.174,0-1.604l-0.009-0.008l-4.41-3.987 C7.903-0.088,7.407-0.063,7.117,0.258L7.106,0.27C6.815,0.591,6.841,1.087,7.162,1.378l3.11,2.812H0.802 C0.359,4.189,0,4.549,0,4.992v0.016C0,5.451,0.359,5.81,0.802,5.81h9.471l-3.11,2.812C6.841,8.913,6.815,9.408,7.106,9.73 l0.011,0.012c0.29,0.321,0.786,0.346,1.107,0.056l4.41-3.987L12.644,5.802z" />
          </svg>
        ) : (
          <slot name="icon" />
        )}
      </span>
    )
  }
</a>

<style is:global>
  .btn_type07 {
    position: relative;
    display: inline-flex;
    flex-wrap: wrap;
    justify-content: center;
    align-items: center;
    gap: 5px;
    padding: 0.5em 1.5em;
    min-height: 3em;
    color: var(--clr);
    line-height: 1.2;
    text-align: center;
    z-index: 1;
  }
  .btn_type07:before {
    content: '';
    position: absolute;
    top: calc(50% - 1.5em);
    left: 0;
    width: 3em;
    height: 3em;
    border-radius: calc(infinity * 1px);
    background: var(--bgc);
    transition: all 0.85s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    z-index: -1;
  }
  .btn_type07 .ch-icon {
    margin-left: 15px;
    transform: translateX(-5px);
    transition: 0.5s;
  }
  .btn_type07 .ch-icon > * {
    display: block;
  }
  .btn_type07:hover:before {
    width: 100%;
  }
  .btn_type07:hover .ch-icon {
    transform: none;
  }
  .btn_type07:active {
    transform: scale(0.96);
  }
</style>
